<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>目标 | 黑马程序员</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="前端">
    
    <link rel="preload" href="/assets/css/0.styles.af94bc93.css" as="style"><link rel="preload" href="/assets/js/app.2a747009.js" as="script"><link rel="preload" href="/assets/js/2.5b116229.js" as="script"><link rel="preload" href="/assets/js/1.59fbfee6.js" as="script"><link rel="preload" href="/assets/js/24.27702aba.js" as="script"><link rel="prefetch" href="/assets/js/10.cb436ae5.js"><link rel="prefetch" href="/assets/js/11.a0a1e346.js"><link rel="prefetch" href="/assets/js/12.8376ce37.js"><link rel="prefetch" href="/assets/js/13.03f419a6.js"><link rel="prefetch" href="/assets/js/14.db19dc67.js"><link rel="prefetch" href="/assets/js/15.05ac4144.js"><link rel="prefetch" href="/assets/js/16.1a104d45.js"><link rel="prefetch" href="/assets/js/17.ddfb3504.js"><link rel="prefetch" href="/assets/js/18.b434740f.js"><link rel="prefetch" href="/assets/js/19.c832b7a6.js"><link rel="prefetch" href="/assets/js/20.a9c8253c.js"><link rel="prefetch" href="/assets/js/21.3bb9c148.js"><link rel="prefetch" href="/assets/js/22.23c2da3c.js"><link rel="prefetch" href="/assets/js/23.c04dc6d3.js"><link rel="prefetch" href="/assets/js/25.4dd34956.js"><link rel="prefetch" href="/assets/js/26.f0bd9f64.js"><link rel="prefetch" href="/assets/js/27.dc1f04a8.js"><link rel="prefetch" href="/assets/js/28.ad1d2e71.js"><link rel="prefetch" href="/assets/js/29.d936240e.js"><link rel="prefetch" href="/assets/js/3.a996eb40.js"><link rel="prefetch" href="/assets/js/30.47559263.js"><link rel="prefetch" href="/assets/js/31.67662ea0.js"><link rel="prefetch" href="/assets/js/32.e287e8d3.js"><link rel="prefetch" href="/assets/js/33.5cc2b4b9.js"><link rel="prefetch" href="/assets/js/4.6aaf9938.js"><link rel="prefetch" href="/assets/js/5.bb248bcb.js"><link rel="prefetch" href="/assets/js/6.abc1eab0.js"><link rel="prefetch" href="/assets/js/7.0a0df318.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5a4296f1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.af94bc93.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">黑马程序员</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  小程序开发
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  小程序开发
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>小程序开发</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/WeChat/" aria-current="page" class="sidebar-link">课程简介</a></li><li><a href="/WeChat/day01.html" aria-current="page" class="active sidebar-link">第一天</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/WeChat/day01.html#目标" class="sidebar-link">目标</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/WeChat/day01.html#_1-认识小程序" class="sidebar-link">1.认识小程序</a></li><li class="sidebar-sub-header"><a href="/WeChat/day01.html#_2-第一个小程序" class="sidebar-link">2.第一个小程序</a></li><li class="sidebar-sub-header"><a href="/WeChat/day01.html#_3-小程序代码构成" class="sidebar-link">3.小程序代码构成</a></li><li class="sidebar-sub-header"><a href="/WeChat/day01.html#_4-小程序宿主环境" class="sidebar-link">4.小程序宿主环境</a></li><li class="sidebar-sub-header"><a href="/WeChat/day01.html#_5-小程序协同工作和发布" class="sidebar-link">5.小程序协同工作和发布</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="目标"><a href="#目标" class="header-anchor">#</a> 目标</h2> <h3 id="_1-认识小程序"><a href="#_1-认识小程序" class="header-anchor">#</a> 1.认识小程序</h3> <h4 id="小程序简介"><a href="#小程序简介" class="header-anchor">#</a> 小程序简介</h4> <p>小程序是一种全新的连接用户与服务的方式，它可以在微信内被便捷地获取和传播，同时具有出色的使用体验。</p> <h4 id="小程序与普通网页开发的区别"><a href="#小程序与普通网页开发的区别" class="header-anchor">#</a> 小程序与普通网页开发的区别</h4> <p>小程序的主要开发语言是 JavaScript ，所以通常小程序的开发会被用来同普通的网页开发来做对比。两者有很大的相似性，对于前端开发者而言，从网页开发迁移到小程序的开发成本并不高，但是二者还是有些许区别的</p> <h5 id="_1-运行环境不同"><a href="#_1-运行环境不同" class="header-anchor">#</a> 1.运行环境不同</h5> <p>网页运行在<code>浏览器</code>环境中</p> <p>小程序运行在<code>微信</code>环境中</p> <h5 id="_2-开发模式不同"><a href="#_2-开发模式不同" class="header-anchor">#</a> 2.开发模式不同</h5> <p>网页的开发：主要是面向浏览器，web开发体系，搭配上一些辅助工具或者编辑器即可，使用标准的 <code>HTML、CSS、JavaScript</code></p> <p>小程序开发：面向 iOS 和 Android 的微信客户端，小程序开发体系，需要经过申请小程序帐号、安装小程序开发者工具、配置项目等等过程方可完成</p> <h5 id="_3-api不同"><a href="#_3-api不同" class="header-anchor">#</a> 3.API不同</h5> <p>由于运行环境的不同，小程序的架构模型和传统web单线程架构也不同，小程序为双线程架构，逻辑层和渲染层是分开的</p> <p>小程序无法调用 DOM API和BOM API， 例如 jQuery、 Zepto 等，会使用到<code>window</code>对象和<code>document</code>对象，所以在小程序中是无法运行的。</p> <p>小程序基于微信提供更多私有API:<code>扫码、支付、地理位置</code>...</p> <h4 id="体验小程序"><a href="#体验小程序" class="header-anchor">#</a> 体验小程序</h4> <p>开发者可使用微信客户端(6.7.2 及以上版本)扫码下方小程序码，体验小程序。</p> <img src="/wx/wx_demo.jpg" align="left" style="zoom:80%;"> <h3 id="_2-第一个小程序"><a href="#_2-第一个小程序" class="header-anchor">#</a> 2.第一个小程序</h3> <h4 id="注册小程序账号"><a href="#注册小程序账号" class="header-anchor">#</a> 注册小程序账号</h4> <p>先准备一个没有注册过公众号的邮箱，使用浏览器打开 https://mp.weixin.qq.com 网址，点击右上角的“立即注册”按钮，账号类型选择“小程序”，再按照提示填写个人信息，最后进入邮箱激活账号即可。</p> <p>注册指引：https://developers.weixin.qq.com/community/business/doc/000200772f81508894e94ec965180d</p> <h5 id="获取小程序appid"><a href="#获取小程序appid" class="header-anchor">#</a> 获取小程序AppID</h5> <p>每个微信小程序在创建之后（即在微信公众平台注册并初始化完成）便同时生成了一<code>AppID</code>，这个 ID 标记了小程序的唯一性，相当于小程序平台的一个身份证，后续会在很多地方要用到</p> <img src="/wx/appid.jpg" alt="appid" style="zoom:80%;"> <h4 id="安装开发者工具"><a href="#安装开发者工具" class="header-anchor">#</a> 安装开发者工具</h4> <h5 id="_1-概览"><a href="#_1-概览" class="header-anchor">#</a> 1.概览</h5> <p>为了帮助开发者简单和高效地开发和调试微信小程序，我们在原有的公众号网页调试工具的基础上，推出了全新的 <a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html" target="_blank" rel="noopener noreferrer">微信开发者工具<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，集成了公众号网页调试和小程序调试两种开发模式</p> <ul><li>使用小程序调试，开发者可以完成小程序的 API 和页面的开发调试。</li> <li>代码查看和编辑</li> <li>小程序预览和发布等功能</li></ul> <h5 id="_2-下载和安装"><a href="#_2-下载和安装" class="header-anchor">#</a> 2.下载和安装</h5> <p>推荐下载和安装最新的<code>稳定版</code>（Stable Build）的微信开发者工具，下载后按照安装步骤安装即可</p> <p>下载页面的链接：https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html</p> <h5 id="_3-登录"><a href="#_3-登录" class="header-anchor">#</a> 3.登录</h5> <p>安装完后打开，在登录页，可以使用微信扫码登录开发者工具，开发者工具将使用这个微信帐号的信息进行小程序的开发和调试</p> <div style="overflow:hidden;"><img src="/wx/logoin.jpg" alalt="logoin" style="float:left;zoom:33%;"> <img src="/wx/phone.jpg" alalt="phone" style="float:left;zoom:33%;"> <img src="/wx/success.jpg" alalt="success" style="float:left;zoom:33%;"></div> <h5 id="_4-编辑器设置"><a href="#_4-编辑器设置" class="header-anchor">#</a> 4.编辑器设置</h5> <div style="overflow:hidden;"><img src="/wx/out_set.jpg" style="float:left;zoom:25%;"> <img src="/wx/agent_set.jpg" style="float:left;zoom:25%;"></div> <h4 id="运行第一个小程序"><a href="#运行第一个小程序" class="header-anchor">#</a> 运行第一个小程序</h4> <h5 id="_1-创建第一个小程序"><a href="#_1-创建第一个小程序" class="header-anchor">#</a> 1.创建第一个小程序</h5> <div style="overflow:hidden;"><img src="/wx/select.jpg" style="float:left;zoom:30%;"> <img src="/wx/create.jpg" style="float:left;zoom:30%;"></div> <h5 id="_2-编译预览小程序"><a href="#_2-编译预览小程序" class="header-anchor">#</a> 2.编译预览小程序</h5> <img src="/wx/run.jpg" alt="run" style="zoom:40%;"> <h5 id="_3-主界面"><a href="#_3-主界面" class="header-anchor">#</a> 3.主界面</h5> <img src="/wx/ui.jpg" alt="ui" style="zoom:40%;"> <h3 id="_3-小程序代码构成"><a href="#_3-小程序代码构成" class="header-anchor">#</a> 3.小程序代码构成</h3> <h4 id="项目的目录基本结构"><a href="#项目的目录基本结构" class="header-anchor">#</a> 项目的目录基本结构</h4> <img src="/wx/dir.jpg" alt="dir" style="zoom:70%;"> <h4 id="代码构成"><a href="#代码构成" class="header-anchor">#</a> 代码构成</h4> <p>项目主体由<code>app.js</code>、<code>app.json</code>、<code>app.wxss</code>三个文件组成，放在根目录。</p> <table><thead><tr><th style="text-align:left;">文件</th> <th style="text-align:left;">必需</th> <th style="text-align:left;">作用</th></tr></thead> <tbody><tr><td style="text-align:left;">app.js</td> <td style="text-align:left;">是</td> <td style="text-align:left;">小程序逻辑,<code>App()</code> 必须在 <code>app.js</code> 中注册，启动小程序</td></tr> <tr><td style="text-align:left;">app.json</td> <td style="text-align:left;">是</td> <td style="text-align:left;">小程序公共配置</td></tr> <tr><td style="text-align:left;">app.wxss</td> <td style="text-align:left;">否</td> <td style="text-align:left;">小程序公共样式表</td></tr></tbody></table> <p><code>pages</code>文件夹里是小程序的各个页面，每个界面一般都由<code>.wxml</code>、<code>.wxss</code>、<code>.js</code>、<code>.json</code>四个文件组成，四个文件必须是相同的名字和路径。</p> <table><thead><tr><th style="text-align:left;">文件类型</th> <th style="text-align:left;">必需</th> <th style="text-align:left;">作用</th></tr></thead> <tbody><tr><td style="text-align:left;">js</td> <td style="text-align:left;">是</td> <td style="text-align:left;">页面逻辑，通过<code>Page()</code>函数注册页面</td></tr> <tr><td style="text-align:left;">wxml</td> <td style="text-align:left;">是</td> <td style="text-align:left;">页面结构</td></tr> <tr><td style="text-align:left;">json</td> <td style="text-align:left;">否</td> <td style="text-align:left;">页面配置</td></tr> <tr><td style="text-align:left;">wxss</td> <td style="text-align:left;">否</td> <td style="text-align:left;">页面样式表</td></tr></tbody></table> <h5 id="_1-json-配置"><a href="#_1-json-配置" class="header-anchor">#</a> 1.<code>JSON</code> 配置</h5> <p>作用：JSON 是一种数据格式，在实际开发中，JSON 总是以<strong>配置文件</strong>的形式出现。小程序项目中也不例外：通过不同的 .json 配置文件，可以对小程序项目进行不同级别的配置。</p> <table><thead><tr><th style="text-align:left;">文件名</th> <th style="text-align:left;">方式</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;">app.json</td> <td style="text-align:left;">全局配置</td> <td style="text-align:left;">包括了所有页面路径、界面表现、网络超时时间、底部 tab、插件等，常用的两个配置是 <code>window</code> 和 <code>pages</code></td></tr> <tr><td style="text-align:left;">project.config.json</td> <td style="text-align:left;">工具配置</td> <td style="text-align:left;">对项目工具相关的，比如开发者工具的编译设置（是否使用 ES6 语法等）、界面设置，以及云函数相关</td></tr> <tr><td style="text-align:left;">page.json</td> <td style="text-align:left;">页面配置</td> <td style="text-align:left;">对本页面的窗口表现进行配置，页面中配置项会覆盖 <code>app.json</code> 的 <code>window</code> 中相同的配置项</td></tr></tbody></table> <p><strong>app.json</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;pages&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// 设置页面的路径</span>
    <span class="token string">&quot;pages/index/index&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;pages/logs/index&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;window&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 设置默认窗口的表现形式</span>
     <span class="token property">&quot;navigationBarBackgroundColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#ffffff&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;navigationBarTextStyle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;black&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;navigationBarTitleText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;小程序&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;backgroundColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#eeeeee&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;backgroundTextStyle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;light&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tabBar&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 底部tab或者顶部tab的表现，是个数组，最少配置2个，最多5个</span>
    <span class="token property">&quot;list&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      <span class="token property">&quot;pagePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/index/index&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;首页&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;pagePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/logs/index&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;日志&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;networkTimeout&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 默认都是 60000 秒一分钟</span>
    <span class="token property">&quot;request&quot;</span><span class="token operator">:</span> <span class="token number">5000</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;style&quot;</span><span class="token operator">:</span> <span class="token string">&quot;v2&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sitemapLocation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;sitemap.json&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><table><thead><tr><th style="text-align:left;">属性</th> <th style="text-align:left;">类型</th> <th style="text-align:left;">必填</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>pages</code></td> <td style="text-align:left;">string[]</td> <td style="text-align:left;">是</td> <td style="text-align:left;">页面路径列表</td></tr> <tr><td style="text-align:left;"><code>window</code></td> <td style="text-align:left;">Object</td> <td style="text-align:left;">否</td> <td style="text-align:left;">全局的默认窗口表现</td></tr> <tr><td style="text-align:left;"><code>tabBar</code></td> <td style="text-align:left;">Object</td> <td style="text-align:left;">否</td> <td style="text-align:left;">底部 <code>tab</code> 栏的表现</td></tr> <tr><td style="text-align:left;">networkTimeout</td> <td style="text-align:left;">Object</td> <td style="text-align:left;">否</td> <td style="text-align:left;">网络超时时间</td></tr> <tr><td style="text-align:left;">debug</td> <td style="text-align:left;">boolean</td> <td style="text-align:left;">否</td> <td style="text-align:left;">是否开启 debug 模式，默认关闭</td></tr> <tr><td style="text-align:left;">subpackages</td> <td style="text-align:left;">Object[]</td> <td style="text-align:left;">否</td> <td style="text-align:left;">分包结构配置</td></tr> <tr><td style="text-align:left;">workers</td> <td style="text-align:left;">string</td> <td style="text-align:left;">否</td> <td style="text-align:left;"><code>Worker</code> 代码放置的目录</td></tr> <tr><td style="text-align:left;">sitemapLocation</td> <td style="text-align:left;">string</td> <td style="text-align:left;">是</td> <td style="text-align:left;">指明 sitemap.json 的位置</td></tr> <tr><td style="text-align:left;">style</td> <td style="text-align:left;">string</td> <td style="text-align:left;">否</td> <td style="text-align:left;">指定使用升级后的 weui 样式 版本</td></tr></tbody></table> <p><strong>project.config.json</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;项目配置文件。&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;packOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;ignore&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;setting&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;compileType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;miniprogram&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;appid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;wx0f2404b606f7a9e5&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;projectname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;项目名称&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>page.json</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;navigationBarTitleText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;首页&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;navigationStyle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 自定义导航栏</span>
  <span class="token property">&quot;usingComponents&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="_2-wxml-模板"><a href="#_2-wxml-模板" class="header-anchor">#</a> 2.<code>WXML</code> 模板</h5> <p>WXML（WeiXin Markup Language）是框架设计的一套标签语言，结合<code>基础组件</code>、<code>事件系统</code>，可以构建出页面的结构。其作用类似于网页开发中的 HTML角色。</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container log-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userinfo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name"><span class="token namespace">wx:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{canIUseOpenData}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userinfo-avatar<span class="token punctuation">&quot;</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bindViewTap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user-motto<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{motto}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name"><span class="token namespace">wx:</span>elif</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{!hasUserInfo}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>else</span><span class="token punctuation">&gt;</span></span> 请使用1.4.4及以上版本基础库 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{logs}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>timeStamp<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>for-item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>log<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>log-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{index + 1}}. {{log.date}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li>小程序自定义一套组件和html标签不一样
<ul><li>view、text...</li></ul></li> <li>小程序组件属性html标签属性大部分一样
<ul><li>id、style、class、bind*、catch*</li></ul></li> <li>类似vue模板数据绑定表达式，数据绑定、列表渲染、条件渲染、模板、引用
<ul><li>wx:if、wx:for</li></ul></li></ul> <h5 id="_3-wxss-样式"><a href="#_3-wxss-样式" class="header-anchor">#</a> 3.<code>WXSS</code> 样式</h5> <p>WXSS (WeiXin Style Sheets)是一套样式语言，用于描述 WXML 的组件样式，WXSS 具有 CSS 大部分特性。同时为了更适合开发微信小程序，WXSS 对 CSS 进行了扩充以及修改</p> <h6 id="尺寸单位rpx"><a href="#尺寸单位rpx" class="header-anchor">#</a> 尺寸单位rpx</h6> <p><code>rpx</code> 可以根据屏幕的宽带进行自适应，不需要手动计算，类似于rem</p> <h6 id="样式导入"><a href="#样式导入" class="header-anchor">#</a> 样式导入</h6> <p><code>@import</code>导入外联样式表，如：<code>@import &quot;test.wxss&quot;</code>;</p> <h6 id="提供了全局的样式和局部样式"><a href="#提供了全局的样式和局部样式" class="header-anchor">#</a> 提供了全局的样式和局部样式</h6> <p>定义在<code>app.wxss</code>中的全局样式，作用于每个页面。定义在<code>page</code>的<code>.wxss</code>文件只作用于对应的页面，会覆盖<code>app.wxss</code>中相同的选择器</p> <h5 id="_4-js-逻辑交互"><a href="#_4-js-逻辑交互" class="header-anchor">#</a> 4.<code>JS</code> 逻辑交互</h5> <p>JS是页面的脚本代码，一个服务仅仅只有界面展示是不够的，还需要和用户做交互，通过<code>Page()</code>函数注册页面。可以指定页面的初始数据、生命周期、事件处理、获取用户的位置等等</p> <h3 id="_4-小程序宿主环境"><a href="#_4-小程序宿主环境" class="header-anchor">#</a> 4.小程序宿主环境</h3> <p>我们称微信客户端给小程序所提供的环境为宿主环境。小程序可以调用宿主环境提供的微信客户端的能力，这就使得小程序比普通网页拥有更多的能力。</p> <h5 id="渲染原理和通信"><a href="#渲染原理和通信" class="header-anchor">#</a> 渲染原理和通信</h5> <p>小程序的运行环境分成渲染层和逻辑层，渲染层和逻辑层是分离的。其中 WXML 模板和 WXSS 样式工作在渲染层，JS 脚本工作在逻辑层</p> <table><thead><tr><th style="text-align:left;"><strong>运行环境</strong></th> <th style="text-align:left;"><strong>逻辑层</strong></th> <th style="text-align:left;"><strong>渲染层</strong></th></tr></thead> <tbody><tr><td style="text-align:left;">iOS</td> <td style="text-align:left;">JavaScriptCore</td> <td style="text-align:left;">WKWebView</td></tr> <tr><td style="text-align:left;">安卓</td> <td style="text-align:left;">V8</td> <td style="text-align:left;">chromium定制内核</td></tr> <tr><td style="text-align:left;">小程序开发者工具</td> <td style="text-align:left;">NWJS</td> <td style="text-align:left;">Chrome WebView</td></tr></tbody></table> <p>小程序的渲染层和逻辑层分别由2个线程管理：渲染层的界面使用了WebView 进行渲染；逻辑层采用JsCore线程运行JS脚本。一个小程序存在多个界面，所以渲染层存在多个WebView线程，这两个线程的通信会经由微信客户端（下文中也会采用Native来代指微信客户端）做中转，逻辑层发送网络请求也经由Native转发。</p> <img src="/wx/render.png" alt="render" style="zoom:40%;"> <h5 id="小程序启动的过程"><a href="#小程序启动的过程" class="header-anchor">#</a> 小程序启动的过程</h5> <p>① 把小程序的代码包下载到本地</p> <p>② 解析 app.json 全局配置文件</p> <p>③ 执行 app.js 小程序入口文件，调用 App() 创建小程序实例</p> <p>④ 渲染小程序首页</p> <p>⑤ 小程序启动完成</p> <h5 id="页面渲染的过程"><a href="#页面渲染的过程" class="header-anchor">#</a> 页面渲染的过程</h5> <p>① 加载解析页面的 .json 配置文件</p> <p>② 加载页面的 .wxml 模板和 .wxss 样式</p> <p>③ 执行页面的 .js 文件，调用 Page() 创建页面实例</p> <p>④ 页面渲染完成</p> <h5 id="组件"><a href="#组件" class="header-anchor">#</a> 组件</h5> <p>一个小程序页面可以分解成多个部分组成，<code>组件</code>就是小程序页面的基本组成单元。为了让开发者可以快速进行开发，像搭积木一样，组合各种组件拼合成自己的小程，小程序的宿主环境提供了一系列基础组件</p> <ul><li><p>视图容器：主要是实现页面布局的，对常见的布局形式进行了封装，比如滚动 sroll-view 等</p> <ul><li>view</li> <li>scroll-view</li> <li>swiper &amp; swiper-item</li></ul></li> <li><p>基本内容：类似 HTML5 中内容相关的 p、em 等</p> <ul><li>text</li> <li>rich-text</li></ul></li> <li><p>表单相关：要比 HTML5 的 form 表单丰富一些</p></li> <li><p>导航：类似 a 标签</p> <ul><li>navigator（后面课程会专门讲解）</li></ul></li> <li><p>媒体组件：类比 HTML5 中的 video、audio 和 img 等，但是提供更标准的界面和更丰富的 API 支持</p> <ul><li>image</li></ul></li> <li><p>画布：Native 实现的 Canvas</p></li> <li><p>地图：结合腾讯地图数据 Native 实现的组件</p></li> <li><p>开放能力：这部分组件偏通用和小程序业务</p></li></ul> <h5 id="api"><a href="#api" class="header-anchor">#</a> API</h5> <p>小程序宿主环境提供了丰富的API，API概念时，通常指的是wx对象底下的方法。可以方便的调起微信提供的能力，如获取用户信息，本地存储，支付功能等</p> <ul><li><p>事件监听 API</p> <p><code>wx.on*</code> 开头的 API 是监听某个事件发生的API接口，接受一个 Callback 函数作为参数。当该事件触发时，会调用 Callback 函数。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 这类 API 接受一个回调函数作为参数，当事件触发时会调用这个回调函数，并将相关数据以参数形式传入</span>
wx<span class="token punctuation">.</span><span class="token function">onCompassChange</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>direction<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>同步 API</p> <p>以 <code>Sync</code> 结尾的 API 都是同步 API</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 同步 API 的执行结果可以通过函数返回值直接获取，如果执行出错会抛出异常</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
  wx<span class="token punctuation">.</span><span class="token function">setStorageSync</span><span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">,</span> <span class="token string">'value'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>异步 API</p> <p>大多数 API 都是异步 API，如 <code>wx.request</code>，<code>wx.login</code> 等。这类 API 接口通常都接受一个 <code>Object</code> 类型的参数，一般由success、fail、complete三个回调来接收接口调用结果</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'example.php'</span><span class="token punctuation">,</span> 
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token string">''</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">success</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">fail</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li></ul> <h3 id="_5-小程序协同工作和发布"><a href="#_5-小程序协同工作和发布" class="header-anchor">#</a> 5.小程序协同工作和发布</h3> <p>在中大型的公司里，人员的分工非常仔细：同一个小程序项目，一般会有不同岗位、不同角色的员工同时参与设计与开发。</p> <p>此时出于管理需要，我们<strong>迫切需要对</strong>不同岗位、不同角色的<strong>员工的权限进行边界的划分</strong>，使他们能够高效的进行协同工作。</p> <h4 id="_1-人员组织结构和权限分配"><a href="#_1-人员组织结构和权限分配" class="header-anchor">#</a> 1.人员组织结构和权限分配</h4> <p><strong>了解项目成员组织结构</strong></p> <img src="/wx/group.png" alt="group" style="zoom:80%;"> <p><strong>小程序的开发流程</strong></p> <img src="/wx/flow.png" alt="flow" style="zoom:80%;"> <p><strong>为了便于管理，小程序平台给不同角色定义了7种权限</strong></p> <table><thead><tr><th style="text-align:left;"><strong>权限</strong></th> <th style="text-align:left;"><strong>说明</strong></th></tr></thead> <tbody><tr><td style="text-align:left;">开发者权限</td> <td style="text-align:left;">可使用小程序开发者工具及开发版小程序进行开发</td></tr> <tr><td style="text-align:left;">体验者权限</td> <td style="text-align:left;">可使用体验版小程序</td></tr> <tr><td style="text-align:left;">登录</td> <td style="text-align:left;">可登录小程序管理后台，无需管理员确认</td></tr> <tr><td style="text-align:left;">数据分析</td> <td style="text-align:left;">使用小程序数据分析功能查看小程序数据</td></tr> <tr><td style="text-align:left;">开发管理</td> <td style="text-align:left;">小程序提交审核、发布、回退</td></tr> <tr><td style="text-align:left;">开发设置</td> <td style="text-align:left;">设置小程序服务器域名、消息推送及扫描普通链接二维码打开小程序</td></tr> <tr><td style="text-align:left;">暂停服务设置</td> <td style="text-align:left;">暂停小程序线上服务</td></tr></tbody></table> <p>管理者可以很方便分配这些权限给项目的各个组织成员，小程序的管理比传统的网页开发和App应用开发更为简单便捷。</p> <table><thead><tr><th style="text-align:left;"><strong>成员</strong></th> <th style="text-align:left;"><strong>权限分配</strong></th></tr></thead> <tbody><tr><td style="text-align:left;">项目管理组成员</td> <td style="text-align:left;">拥有所有权限</td></tr> <tr><td style="text-align:left;">开发组成员</td> <td style="text-align:left;">开发者权限 / 体验者权限 / 数据分析</td></tr> <tr><td style="text-align:left;">产品组成员</td> <td style="text-align:left;">体验者权限 / 数据分析</td></tr> <tr><td style="text-align:left;">测试组成员</td> <td style="text-align:left;">体验者权限</td></tr></tbody></table> <h4 id="_2-小程序的版本"><a href="#_2-小程序的版本" class="header-anchor">#</a> 2.小程序的版本</h4> <p>一般的软件开发流程，开发者编写代码自测开发版程序，直到程序达到一个稳定可体验的状态时，开发者会把这个体验版本给到产品经理和测试人员进行体验测试，最后修复完程序的Bug后发布供外部用户正式使用。</p> <table><thead><tr><th style="text-align:left;"><strong>权限</strong></th> <th style="text-align:left;"><strong>说明</strong></th></tr></thead> <tbody><tr><td style="text-align:left;">开发版本</td> <td style="text-align:left;">使用开发者工具，可将代码上传到开发版本中。 开发版本只保留每人最新的一份上传的代码。<br>点击提交审核，可将代码提交审核。开发版本可删除，不影响线上版本和审核中版本的代码。</td></tr> <tr><td style="text-align:left;">体验版本</td> <td style="text-align:left;">可以选择某个开发版本作为体验版，并且选取一份体验版。</td></tr> <tr><td style="text-align:left;">审核中版本</td> <td style="text-align:left;">只能有一份代码处于审核中。有审核结果后可以发布到线上，也可直接重新提交审核，覆盖原审核版本。</td></tr> <tr><td style="text-align:left;">线上版本</td> <td style="text-align:left;">线上所有用户使用的代码版本，该版本代码在新版本代码发布后被覆盖更新。</td></tr></tbody></table> <h4 id="_3-发布"><a href="#_3-发布" class="header-anchor">#</a> 3.发布</h4></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/WeChat/" class="prev router-link-active">
        课程简介
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2a747009.js" defer></script><script src="/assets/js/2.5b116229.js" defer></script><script src="/assets/js/1.59fbfee6.js" defer></script><script src="/assets/js/24.27702aba.js" defer></script>
  </body>
</html>
